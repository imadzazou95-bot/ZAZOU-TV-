
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جدول المباريات</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;900&display=swap" rel="stylesheet">
    <style>
        * {margin:0; padding:0; box-sizing:border-box;}
        body {font-family:'Cairo',sans-serif; background:#000; color:#fff; padding-top:20px;}
        .tabs {display:flex; justify-content:center; gap:20px; margin:20px 0 30px; flex-wrap:wrap;}
        .tab {background:#221f1f; color:#fff; padding:14px 35px; border-radius:50px; cursor:pointer; font-weight:bold; transition:0.3s;}
        .tab:hover, .tab.active {background:#E50914; transform:scale(1.07);}
        .container {max-width:1100px; margin:0 auto; padding:10px;}
        .match-card {background:#141414; border-radius:12px; padding:18px; margin:12px 8px; box-shadow:0 6px 20px rgba(0,0,0,0.8); display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap;}
        .team {display:flex; align-items:center; gap:15px; min-width:280px; flex:1;}
        .team img {width:55px; height:55px; border-radius:50%; background:#fff; padding:5px;}
        .team span {font-size:1.25rem; font-weight:700; max-width:160px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;}
        .vs-time {font-size:1.6rem; font-weight:900; color:#E50914; min-width:100px; text-align:center;}
        .league {width:100%; text-align:center; color:#999; margin-top:10px; font-size:0.95rem;}
        .league b {color:#E50914;}
        .loading {text-align:center; font-size:2rem; color:#E50914; padding:100px;}
    </style>
</head>
<body>

<div class="tabs">
    <div class="tab" onclick="loadMatches(-1)">الأمس</div>
    <div class="tab active" onclick="loadMatches(0)">اليوم</div>
    <div class="tab" onclick="loadMatches(1)">غداً</div>
</div>

<div class="container">
    <div id="loading" class="loading">جاري تحميل المباريات...</div>
    <div id="matches"></div>
</div>

<script>
    const API_KEY = 'bebbbc3ed33a067e20d7d61466556062';

    function getDate(offset) {
        const d = new Date();
        d.setDate(d.getDate() + offset);
        return d.toISOString().split('T')[0];
    }

    function loadMatches(offset) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        event.target.classList.add('active');

        const date = getDate(offset);
        document.getElementById('matches').innerHTML = '';
        document.getElementById('loading').style.display = 'block';

        fetch(`https://v3.football.api-sports.io/fixtures?date=${date}`, {
            headers: {
                'x-rapidapi-key': API_KEY,
                'x-rapidapi-host': 'v3.football.api-sports.io'
            }
        })
        .then(res => res.json())
        .then(data => {
            document.getElementById('loading').style.display = 'none';
            const container = document.getElementById('matches');
            
            const priority = [8,2,3,4,39,45,61,78,79,88,135,140,71,1,10,16];
            data.response.sort((a,b) => {
                const pa = priority.includes(a.league.id) ? 0 : 1;
                const pb = priority.includes(b.league.id) ? 0 : 1;
                return pa - pb || a.fixture.timestamp - b.fixture.timestamp;
            });

            if (data.response.length === 0) {
                container.innerHTML = '<div style="text-align:center;padding:80px;color:#888;font-size:1.5rem;">لا توجد مباريات</div>';
                return;
            }

            data.response.forEach(m => {
                const time = new Date(m.fixture.date).toLocaleTimeString('en-GB', {hour:'2-digit', minute:'2-digit'});

                const card = document.createElement('div');
                card.className = 'match-card';
                card.innerHTML = `
                    <div class="team">
                        <img src="${m.teams.home.logo}" alt="${m.teams.home.name}">
                        <span>${m.teams.home.name}</span>
                    </div>

                    <div class="vs-time">${time}</div>

                    <div class="team" style="direction:ltr;text-align:left;">
                        <span>${m.teams.away.name}</span>
                        <img src="${m.teams.away.logo}" alt="${m.teams.away.name}">
                    </div>

                    <div class="league"><b>${m.league.name}</b> • ${m.league.country}</div>
                `;
                container.appendChild(card);
            });
        })
        .catch(() => {
            document.getElementById('loading').innerHTML = 'فشل الاتصال – تأكد من الإنترنت';
        });
    }

    loadMatches(0);
</script>
</body>
</html>
