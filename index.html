<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZAZOU TV - جدول المباريات</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600;900&display=swap" rel="stylesheet">
    <style>
        body {margin:0; font-family:'Cairo',sans-serif; background:#141414; color:#fff; min-height:100vh;}
        header {background:#E50914; padding:15px; text-align:center; box-shadow:0 4px 10px rgba(0,0,0,0.6);}
        h1 {margin:0; font-size:2rem; letter-spacing:1px;}
        .tabs {display:flex; justify-content:center; gap:15px; margin:25px 0; flex-wrap:wrap;}
        .tab {background:#221f1f; padding:12px 30px; border-radius:30px; cursor:pointer; font-weight:bold; transition:0.3s;}
        .tab.active, .tab:hover {background:#E50914; transform:scale(1.05);}
        table {width:95%; max-width:1000px; margin:20px auto; border-collapse:separate; border-spacing:0 12px;}
        td {background:#221f1f; padding:18px 10px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.5);}
        .match-row {display:flex; align-items:center; justify-content:space-between; font-size:1.15rem; font-weight:600;}
        .team {display:flex; align-items:center; gap:15px; width:38%;}
        .team img {width:50px; height:50px;object-fit:contain; background:#fff; border-radius:50%; padding:4px;}
        .team span {white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:140px;}
        .time {font-size:1.4rem; color:#E50914; font-weight:900; min-width:80px;}
        .league {text-align:center; color:#aaa; font-size:0.9rem;}
        .league b {color:#E50914;}
        .loading {text-align:center; font-size:2rem; color:#E50914; margin-top:100px;}
        footer {text-align:center; padding:30px; color:#666; font-size:0.9rem;}
    </style>
</head>
<body>

<header>
    <h1>ZAZOU TV</h1>
</header>

<div class="tabs">
    <div class="tab" onclick="loadDay(-1)">الأمس</div>
    <div class="tab active" onclick="loadDay(0)">اليوم</div>
    <div class="tab" onclick="loadDay(1)">بكرة</div>
</div>

<div id="loading" class="loading</div>

<table id="matchesTable" style="display:none;">
    <tbody id="matchesBody"></tbody>
</table>

<footer>تحديث مباشر من API-Football © 2025</footer>

<script>
    const API_KEY = 'bebbbc3ed33a067e20d7d61466556062';
    const host = 'v3.football.api-sports.io';

    function getDate(offset) {
        const d = new Date();
        d.setDate(d.getDate() + offset);
        return d.toISOString().split('T')[0];
    }

    function loadDay(offset) {
        document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
        event.target.classList.add('active');

        const date = getDate(offset);
        document.getElementById('matchesTable').style.display = 'none';
        document.getElementById('loading').style.display = 'block';
        document.getElementById('loading').innerHTML = 'جاري تحميل المباريات...';

        fetch(`https://${host}/fixtures?date=${date}`, {
            headers: {'x-rapidapi-key': API_KEY, 'x-rapidapi-host': host}
        })
        .then(r => r.json())
        .then(data => {
            const tbody = document.getElementById('matchesBody');
            tbody.innerHTML = '';
            document.getElementById('loading').style.display = 'none';
            document.getElementById('matchesTable').style.display = 'table';

            const topLeagues = [8,2,3,4,39,45,61,78,79,88,135,140,71,1,10,16];

            let matches = data.response;
            matches.sort((a,b) => {
                const aP = topLeagues.includes(a.league.id) ? 0 : 1;
                const bP = topLeagues.includes(b.league.id) ? 0 : 1;
                return aP - bP || a.fixture.timestamp - b.fixture.timestamp;
            });

            if (matches.length === 0) {
                tbody.innerHTML = `<tr><td colspan="3" style="text-align:center;padding:50px;color:#888;">لا توجد مباريات</td></tr>`;
                return;
            }

            matches.forEach(m => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>
                        <div class="match-row">
                            <div class="team">
                                <img src="${m.teams.home.logo}" alt="${m.teams.home.name}">
                                <span>${m.teams.home.name}</span>
                            </div>

                            <div class="time">
                                ${new Date(m.fixture.date).toLocaleTimeString('en-GB',{hour:'2-digit',minute:'2-digit'})}
                            </div>

                            <div class="team" style="direction:ltr; text-align:right;">
                                <span>${m.teams.away.name}</span>
                                <img src="${m.teams.away.logo}" alt="${m.teams.away.name}">
                            </div>
                        </div>
                        <div class="league"><b>${m.league.name}</b> - ${m.league.country}</div>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        })
        .catch(() => {
            document.getElementById('loading').innerHTML = 'خطأ في الاتصال، جرب تاني';
        });
    }

    // تحميل اليوم أول ما الصفحة تفتح
    loadDay(0);
</script>
</body>
</html>
